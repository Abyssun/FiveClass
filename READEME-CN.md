# 五子棋

## 项目基本情况说明

### 项目简介

五子棋作为一款休闲益智游戏，它最大的优点在于游戏规则家喻户晓，简单上手快，趣味性强，所以受广大用户青睐，在各大提供棋牌类游戏的平台都可以看到玩五子横游戏的人很务。休闲然智断戏中等级并不是最重要的追求目标通过对游戏规则的熟悉，能很快上手前握其操作方式，也更适合男女老幼全家共同娱乐，花费时间简短，速战速决在时间感受到游戏的乐趣，完全享受气氛轻松活跃的游戏过程，此种娱乐方式既不助误时间也能轻松调剂娱乐，充分适合现代人们的娱乐需求。更主要的是开发了人的富力，成为年轻一代最流行的游戏，据统计，五子棋游戏的玩家中，学生占了接近三分之一的比例，对学生的智力健康成长起一定作用，正所谓休闲娱乐两不误。

##项目要求

五子棋是全国智力运动会竞技项目之一，是一种两人对弈的纯策略型棋类游戏。通常双方分别使用黑白两色的棋子，下在棋盘直线与横线的交叉点上，先形成五子连线者获胜。具体要求如下：

###功能需求

1. 实现人与人对决
2. 实现人与机器对决，对局双方各执一色棋子，要求其中一方由电脑控制落子
3. 游戏开始要求为空棋盘
4. 黑先、白后，交替下子，每次只能下一子
5. 棋子下在棋盘的空白点上，棋子下定后，不得向其他点位移动，不得从棋盘上拿掉或拿起另落别处
6. 黑方的第一枚棋子可下在棋盘任意交叉点上
7. 轮流下子是双方的权利，但允许任何一方放弃下子权
8. 直到有一方获胜，结束对局
9. 要有图形界面，且界面设计美观、交互性好
10. 允许悔棋
11. 可以直接结束正在进行的对局

### 项目运行图

![image-20221221093644128](D:\桌面\img\READEME-CN\image-20221221093644128-1671586610148-32.png)

## 需求分析

### 功能需求分析

要求系统界面简洁，操作方便，把五子棋游戏规则中最基本的规则体现出来，比如“和棋”、“重新开局”等。五子棋还有一大特点就是速战速决，电脑应在很短时间就应做出判断，并能提供一定的帮助，违反游戏规则的时候应立即指出。

### 系统数据结构分析

五子棋的棋盘是一个15*15规格的棋盘，对于棋局使用同等大小的二维数组存放棋盘上当前的格局。使用同样大小的二维数组，存放棋盘上各个点计算出来的权值。为了计算实现悔棋操作，定义了一个栈，用来记录每一步的棋子。这三个数据结构定义在ChessPad中，分别命名为：ColorPad 和 ValuePad 以及 Stack。ChessPad相当于一个虚拟的棋盘，系统界面就是根据该类的上述三个数据，去绘制棋盘，形成可视化界面的。

为了能够实现人机交互对战，我们在项目中定义了一个AI类，来控制电脑对于落子位置的运算以及执行落子动作。

机器方AI类的定义，该类中使用到的数据结构有两个Map，分别为AttackMap，其中存放的是进攻棋型，以及棋型对应的权值；DefendMap存放的是防守棋型，以及棋型对应的权值。这两个Map中，棋型是key，权值是value。

### 系统界面分析

系统界面布局为上下布局，上半部分为棋盘，大小为800*700像素，棋盘单独为一个容器定义为ChessPadPanel；下半部分为按钮区，也是一个单独的容器ButtonPanel，各个按钮用于实现对系统的各个功能的操作。

主页面MainPanel中包含两个组件，ChessPadPanle 和 ButtonPanel，为实现上下布局，则MainPanel需要继承JSplitPane类，实现对容器的上下布局。

### AI的下棋决策分析

本系统的AI博弈决策采用的是向后看一步的机制，即AI在下棋之前，会假设棋盘中每一个空点下黑棋以及下白棋以后，各个点会得到什么样的棋型，然后计算各点棋型的权值总和，作为该点的权值。最后，在ValuePad中选取一个权值最大的点作为AI的下一步棋。

### 系统按钮功能的分析

模式按钮，本系统具有两种模式，分别为“人人对战”和“人机对战”，用于选择一个按钮点击，则进入相应的对局模式，整个对局的过程中的每一步走棋系统都需要判断当前的对局模式是什么，然后来选择是否需要调用AI进行下棋，为此在ChessPad中定义一个mode参数，该参数用来记录当前对局的模式为什么。

结束按钮，该按钮实现结束当前正在进行的对局，同时结束以后上一局的棋局不能够影响到了下一局游戏，所以当点击结束按钮以后，需要清除棋盘上的数据，ColorPad 和 ValuePad都应重置为空棋盘。

跳过按钮，实现用户弃棋的操作（即放弃本回合下棋），当点击该按钮是，将当前下棋方的下棋权力交给对手方，为了实现该功能，系统需要能够判断当前下棋的是白方还是黑方，为此在ChessPad中定义了一个BlackTurn参数，该参数为一个布尔值，值为true时，表示当前为黑方回合，值为false时表示当前回合为白方回合，所以要实现跳过的功能，只需要在用户每次点击该按钮以后，修改BalckTurn的值即可。

悔棋按钮，实现用户悔棋操作，需要记录棋局的下棋顺序，因此系统有一个栈Stack用来记录当前棋局的每一步走棋，用户点击悔棋，则将栈顶的走棋出栈，同时重新绘制棋盘即可。

## 系统设计概要

![流程图](D:\桌面\img\READEME-CN\流程图-1671593241994-37.jpg)

## 编码与实现

### 项目目录结构

![image-20221221111954906](D:\桌面\img\READEME-CN\image-20221221111954906-1671592796891-34.png)